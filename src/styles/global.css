@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
	:root,
	:root[data-theme="light"] {
		color-scheme: light;

		/* Your existing custom theme variables */
		--theme-bg: 0deg 0% 100%;
		--theme-link: 0deg 0% 60%;
		--theme-text: 0deg 0% 25%;
		--theme-text-faded: 0deg 0% 60%;
		--theme-text-more-faded: 0deg 0% 80%;
		--theme-text-dark: 0deg 0% 20%;
		--theme-accent-2: 0deg 0% 20%;
		--theme-accent: 0deg 0% 80%;
		--theme-quote: 0deg 0% 30%;

		/* shadcn required variables */
		--background: 0 0% 100%;
		--foreground: 0 0% 25%;
		--card: 0 0% 100%;
		--card-foreground: 0 0% 25%;
		--popover: 0 0% 100%;
		--popover-foreground: 0 0% 25%;
		--primary: 0 0% 60%;
		--primary-foreground: 0 0% 100%;
		--secondary: 0 0% 96%;
		--secondary-foreground: 0 0% 25%;
		--muted: 0 0% 96%;
		--muted-foreground: 0 0% 60%;
		--accent: 0 0% 80%;
		--accent-foreground: 0 0% 20%;
		--destructive: 0 84% 60%;
		--destructive-foreground: 0 0% 98%;
		--border: 0 0% 90%;
		--input: 0 0% 90%;
		--ring: 0 0% 60%;
		--radius: 0.5rem;
	}

	:root[data-theme="dark"] {
		color-scheme: dark;

		/* Your existing custom theme variables */
		--theme-bg: 240.02deg 6% 10%;
		--theme-link: 0deg 0% 60%;
		--theme-text: 220deg 3% 75%;
		--theme-text-faded: 0deg 0% 60%;
		--theme-text-more-faded: 0deg 0% 40%;
		--theme-accent: 0deg 0% 100%;
		--theme-accent: 0deg 0% 80%;
		--theme-accent-2: 0deg 0% 73%;
		--theme-quote: 0deg 0% 90%;

		/* shadcn required variables - matched to your dark theme */
		--background: 0 0% 10%;
		--foreground: 220 3% 75%;
		--card: 0 0% 15%;
		--card-foreground: 220 3% 75%;
		--popover: 0 0% 15%;
		--popover-foreground: 220 3% 75%;
		--primary: 240 5% 26%;
		--primary-foreground: 240 5% 84%;
		--secondary: 0 0% 15%;
		--secondary-foreground: 220 3% 75%;
		--muted: 0 0% 15%;
		--muted-foreground: 0 0% 60%;
		--accent: 0 0% 80%;
		--accent-foreground: 0 0% 73%;
		--destructive: 0 62% 30%;
		--destructive-foreground: 0 0% 98%;
		--border: 0 0% 20%;
		--input: 0 0% 20%;
		--ring: 0 0% 60%;
	}
}

/* Your existing scrollbar utilities */
@layer utilities {
	::-webkit-scrollbar {
		@apply h-1 w-1;
	}
	::-webkit-scrollbar-track {
		@apply bg-neutral-200 dark:bg-neutral-700;
	}
	::-webkit-scrollbar-thumb {
		@apply rounded bg-neutral-400 dark:bg-neutral-600;
	}
	::-webkit-scrollbar-thumb:hover {
		@apply bg-neutral-500 dark:bg-neutral-500;
	}
}

::selection {
	@apply bg-neutral-100 dark:bg-neutral-800;
}

.font-alice {
	/* font-family: "Alice", serif; */
	font-family: "Playfair Display Variable", serif;
}

.font-playfair {
	font-family: "Alice", serif;
	/* font-family: "Playfair Display Variable", serif; */
}

.font-source-serif {
	font-family: "Source Serif 4 Variable", serif;
}

.font-garamond {
	font-family: "Eb Garamond Variable", serif;
}

.site-description {
	view-transition-name: site-description;
}

/* .site-post-title { */
/* 	view-transition-name: site-post-title; */
/* } */

.site-social {
	view-transition-name: site-social;
}

@keyframes expand {
	from {
		max-height: 0;
		opacity: 0;
	}
	to {
		max-height: 2000px; /* Use a value that's definitely larger than your content */
		opacity: 1;
	}
}

@keyframes collapse {
	from {
		max-height: 2000px;
		opacity: 1;
	}
	to {
		max-height: 0;
		opacity: 0;
	}
}

.animate-expand {
	animation: expand 300ms ease-in-out;
	overflow: hidden;
}

.animate-collapse {
	animation: collapse 300ms ease-in-out;
	overflow: hidden;
}

.collapsible-content {
	transition: grid-template-rows 300ms ease;
}

.hidden-class {
	@apply animate-collapse animate-expand;
}

::view-transition-old(post-title-*),
::view-transition-new(post-title-*) {
	mix-blend-mode: normal;
	animation: none;
	height: 100%;
	object-fit: cover;
	opacity: 1;
}

.astro-code {
	@apply relative rounded-lg p-4 font-mono text-sm leading-7;
	tab-size: 2;
}

/* Light theme */
[data-theme="light"] .astro-code {
	@apply border border-neutral-200 bg-white;
}

[data-theme="light"] .astro-code .line.highlighted {
	@apply border-l-2 border-neutral-400 bg-neutral-100;
}

[data-theme="light"] .astro-code .word {
	@apply bg-neutral-100;
}

/* Dark theme */
[data-theme="dark"] .astro-code {
	@apply bg-zinc-800;
}

[data-theme="dark"] .astro-code .line.highlighted {
	@apply border-l-2 border-zinc-400 bg-zinc-700/50;
}

[data-theme="dark"] .astro-code .word {
	@apply bg-zinc-700/50;
}

/* Copy button */
.astro-code-content {
	@apply relative;
}

.rehype-pretty-copy {
	@apply absolute right-2 top-2 rounded p-1.5;
	@apply border text-xs opacity-0 transition-opacity duration-200;
	@apply dark:border-zinc-700 dark:hover:border-zinc-600;
	@apply border-neutral-300 hover:border-neutral-400;
}

.astro-code:hover .copy-button {
	@apply opacity-100;
}

@keyframes slideRight {
	to {
		transform: translateX(0);
	}
}

.animate-fadeIn {
	animation: fadeIn 0.3s ease-in-out;
}

@keyframes fadeIn {
	from {
		opacity: 0;
		transform: translateY(-5px);
	}
	to {
		opacity: 1;
		transform: translateY(0);
	}
}
